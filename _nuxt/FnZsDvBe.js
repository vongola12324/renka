import{_ as H}from"./CdR1gS6o.js";import{A as L,B,r as h,f as y,o as l,c as u,a as e,F as V,n as N,s as D,u as x,v as C,m as E,b as S,w as T,d as j,C as A,D as K,E as F,G as Q,H as M,I as $,p as U,T as q,J as G,_ as J}from"./uOP4dqhU.js";import{u as R}from"./dU9ijK35.js";import{g as P}from"./D5UyPOWT.js";const Y={class:"max-h-[32rem] overflow-y-auto overscroll-contain"},O={class:"divide-y divide-gray-200 dark:divide-gray-700",role:"listbox"},W=["onMouseenter","onClick"],X={class:"flex-auto"},Z=["innerHTML"],ee=["innerHTML"],te=["innerHTML"],se={key:0,class:"p-4 text-sm text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700"},oe=L({__name:"SearchResults",props:{results:{type:Array,required:!0}},emits:["close"],setup(s,{expose:o,emit:c}){const f=s,a=c,i=B(),{searchQuery:r}=R(),v=h(-1),k=d=>{if(!r.value)return d;const p=new RegExp(`(${r.value})`,"gi");return d.replace(p,'<span class="bg-yellow-200 font-semibold">$1</span>')},I=d=>{i.push(`/song?id=${d.videoId}`),a("close")};return y(()=>f.results,()=>{v.value=-1}),o({activeIndex:v}),(d,p)=>(l(),u("div",Y,[e("ul",O,[(l(!0),u(V,null,N(s.results,(g,m)=>(l(),u("li",{key:g.videoId,class:D(["cursor-pointer flex items-center px-4 py-4",{"bg-gray-50 dark:bg-gray-700":m===v.value}]),onMouseenter:_=>v.value=m,onClick:_=>I(g),role:"option"},[e("div",X,[e("div",{class:"text-sm font-medium text-gray-900 dark:text-gray-100",innerHTML:k(g.title)},null,8,Z),e("div",{class:"text-sm text-gray-500 dark:text-gray-400",innerHTML:k(g.artist)},null,8,ee),e("div",{class:"text-xs text-gray-400 dark:text-gray-500",innerHTML:k(x(P)(g.videoId))},null,8,te)]),p[0]||(p[0]=e("div",{class:"ml-3 flex-none"},[e("svg",{class:"h-5 w-5 text-gray-400 dark:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})])],-1))],42,W))),128))]),s.results.length===0?(l(),u("div",se," No results found ")):C("",!0)]))}});function re(){const s=h(!1),o=()=>{s.value=!s.value,c()},c=()=>{s.value?(document.documentElement.classList.add("dark"),localStorage.setItem("darkMode","true")):(document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode","false"))},f=()=>{const a=localStorage.getItem("darkMode");s.value=a==="true"||!a&&window.matchMedia("(prefers-color-scheme: dark)").matches,c()};return y(s,c),{isDarkMode:s,toggleDarkMode:o,initDarkMode:f}}const ne={class:"min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300"},ae={class:"bg-blue-600 dark:bg-blue-800 text-white p-4 shadow-md"},le={class:"container mx-auto flex justify-between items-center"},ie={class:"flex items-center"},de={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ue={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ce={key:0,class:"fixed inset-0 z-50 overflow-y-auto pt-16 sm:pt-24"},ve={class:"relative bg-white dark:bg-gray-800 mx-auto max-w-2xl rounded-xl shadow-2xl ring-1 ring-black ring-opacity-5 overflow-hidden"},ge={class:"relative"},me=["onKeydown"],xe=L({__name:"default",setup(s){const{searchQuery:o,songs:c,fetchSongs:f,search:a}=R(),i=h(!1),r=h(null),v=h(null),k=B(),{isDarkMode:I,toggleDarkMode:d,initDarkMode:p}=re();E(async()=>{await f(),p()});const g=()=>{i.value=!i.value,i.value?G(()=>{var n;(n=v.value)==null||n.focus()}):o.value=""},m=()=>{o.value="",i.value=!1},_=n=>{if(!r.value)return;const t=r.value.activeIndex,b=a.value.length-1;n==="down"?r.value.activeIndex=t<b?t+1:0:r.value.activeIndex=t>0?t-1:b},z=()=>{if(!r.value||r.value.activeIndex===-1)return;const n=a.value[r.value.activeIndex];k.push(`/song?id=${n.videoId}`),m()};return y(o,n=>{}),y(a,n=>{}),y(c,n=>{}),(n,t)=>{const b=H;return l(),u("div",ne,[e("nav",ae,[e("div",le,[S(b,{to:"/",class:"text-xl sm:text-2xl font-bold"},{default:T(()=>t[4]||(t[4]=[j("RenKa")])),_:1}),e("div",ie,[e("button",{onClick:t[0]||(t[0]=(...w)=>x(d)&&x(d)(...w)),class:"mr-4 focus:outline-none"},[x(I)?(l(),u("svg",de,t[5]||(t[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)]))):(l(),u("svg",ue,t[6]||(t[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])))]),e("button",{onClick:g,class:"focus:outline-none"},t[7]||(t[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)]))])])]),e("main",{class:D(["container mx-auto",{"blur-transition":i.value}])},[A(n.$slots,"default",{},void 0)],2),S(q,{name:"fade"},{default:T(()=>[i.value?(l(),u("div",ce,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-25 dark:bg-gray-900 dark:bg-opacity-50 transition-opacity backdrop-blur-sm",onClick:m}),e("div",ve,[e("div",ge,[t[8]||(t[8]=e("div",{class:"absolute inset-y-0 left-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400 dark:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),K(e("input",{ref_key:"searchInput",ref:v,"onUpdate:modelValue":t[1]||(t[1]=w=>Q(o)?o.value=w:null),type:"text",placeholder:"Search songs...",class:"block w-full border-0 pl-10 pr-4 py-4 text-gray-900 dark:text-gray-100 placeholder:text-gray-400 dark:placeholder:text-gray-500 bg-white dark:bg-gray-800 focus:ring-0 focus:outline-none sm:text-sm",onKeydown:[t[2]||(t[2]=M($(w=>_("down"),["prevent"]),["down"])),t[3]||(t[3]=M($(w=>_("up"),["prevent"]),["up"])),M($(z,["prevent"]),["enter"]),M(m,["esc"])]},null,40,me),[[F,x(o)]])]),t[9]||(t[9]=e("div",{class:"border-t border-gray-200 dark:border-gray-700"},null,-1)),x(o)?(l(),U(oe,{key:0,results:x(a),onClose:m,ref_key:"searchResults",ref:r},null,8,["results"])):C("",!0)])])):C("",!0)]),_:1})])}}}),he=J(xe,[["__scopeId","data-v-92598b5d"]]);export{he as default};
